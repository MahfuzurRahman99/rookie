<div class="s-collection-wrapper">
  <h1>{{ collection.title }}</h1>
  <p>This is my collection page</p>

  <select id="sort-by">
    {% assign sort_by = collection.sort_by | default: collection.default_sort_by %}

    {% for option in collection.sort_options %}
      <option
        value="{{ option.value }}"
        {% if option.value == sort_by %}
          selected="selected"
        {% endif %}
      >
        {{ option.name }}
      </option>
    {% endfor %}
  </select>

  <div class="collection-products">
    <ul class="product-list">
      {% for product in collection.products %}
        <li class="product-item">
          <a href="{{ product.url }}" class="product-link">
            <div class="product-image">
              <img
                width="100%"
                height="100%"
                src="{{ product.featured_image | image_url }}"
                alt="{{ product.title }}"
              >
            </div>
            <h3 class="product-title">{{ product.title }}</h3>
            <p class="product-price">{{ product.price | money }}</p>
          </a>
        </li>
      {% endfor %}
    </ul>
  </div>
</div>
<style>
  .s-collection-wrapper {
    display: flex;
    flex-direction: column;
    align-items: center;
  }
  .collection-products {
    padding: 20px;
  }
  .product-list {
    display: flex;
    flex-wrap: wrap;
    gap: 20px;
    list-style-type: none;
    padding: 0;
  }
  .product-item {
    background-color: #f9f9f9;
    border: 1px solid #ddd;
    border-radius: 8px;
    overflow: hidden;
    width: 200px;
    text-align: center;
    transition: transform 0.2s;
  }
  .product-item:hover {
    transform: scale(1.05);
  }
  .product-link {
    text-decoration: none;
    color: #333;
  }
  .product-image img {
    width: 100%;
    height: auto;
  }
  .product-title {
    font-size: 16px;
    margin: 10px 0;
  }
  .product-price {
    font-size: 14px;
    color: #888;
    margin-bottom: 15px;
  }
</style>
<script>
  Shopify.queryParams = {};

  // Preserve existing query parameters
  if (location.search.length) {
    var params = location.search.substr(1).split('&');

    for (var i = 0; i < params.length; i++) {
      var keyValue = params[i].split('=');

      if (keyValue.length) {
        Shopify.queryParams[decodeURIComponent(keyValue[0])] = decodeURIComponent(keyValue[1]);
      }
    }
  }

  // Update sort_by query parameter on select change
  document.querySelector('#sort-by').addEventListener('change', function (e) {
    var value = e.target.value;

    Shopify.queryParams.sort_by = value;
    location.search = new URLSearchParams(Shopify.queryParams).toString();
  });
</script>
